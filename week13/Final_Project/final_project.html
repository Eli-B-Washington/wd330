<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Baseball Statistics SPA</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="css/style.css">


<script>




</script>
</head>

<body>
    <main>
        <h1>Baseball Statistics App</h1>
        <h2>
        This App will return baseball statistics for the top 5
        pitchers and hitters of a given year.
        </h2>

        <form action="">
            <label for="year">Select A Year: </label>
            <select id="year"></select>



         
        </form>

        <br>

        <button name="button" id="button" onclick="goFunction()" >Click Me!</button>

        <section class="players">
        <div id="pitchers" class="pitchers">

          <div  id="flip-card-1" class="flip-card" onclick="toggleNav('flip-card-1')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
              </div>
              <div class="flip-card-back">
              <div class="result" id="result1"></div>
              </div>
            </div>
          </div>
          
          <div  id="flip-card-2" class="flip-card" onclick="toggleNav('flip-card-2')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
              </div>
              <div class="flip-card-back">
              <div class="result" id="result2"></div>
              </div>
            </div>
          </div>

          <div  id="flip-card-3" class="flip-card" onclick="toggleNav('flip-card-3')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
              </div>
              <div class="flip-card-back">
              <div class="result" id="result3"></div>
              </div>
            </div>
          </div> 

          <div  id="flip-card-4" class="flip-card" onclick="toggleNav('flip-card-4')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
              </div>
              <div class="flip-card-back">
              <div class="result" id="result4"></div>
              </div>
            </div>
          </div> 

          <div  id="flip-card-5" class="flip-card" onclick="toggleNav('flip-card-5')">
            <div class="flip-card-inner">
              <div class="flip-card-front">
              </div>
              <div class="flip-card-back">
              <div class="result" id="result5"></div>
              </div>
            </div>
          </div> 
      
        </div>

      <div class="hitters">

        <div  id="flip-card-6" class="flip-card" onclick="toggleNav('flip-card-6')">
          <div class="flip-card-inner">
            <div class="flip-card-front">
            </div>
            <div class="flip-card-back">
            <div class="result" id="result6"></div>
            </div>
          </div>
        </div>
        
        <div  id="flip-card-7" class="flip-card" onclick="toggleNav('flip-card-7')">
          <div class="flip-card-inner">
            <div class="flip-card-front">
            </div>
            <div class="flip-card-back">
            <div class="result" id="result7"></div>
            </div>
          </div>
        </div>

        <div  id="flip-card-8" class="flip-card" onclick="toggleNav('flip-card-8')">
          <div class="flip-card-inner">
            <div class="flip-card-front">
            </div>
            <div class="flip-card-back">
            <div class="result" id="result8"></div>
            </div>
          </div>
        </div> 

        <div  id="flip-card-9" class="flip-card" onclick="toggleNav('flip-card-9')">
          <div class="flip-card-inner">
            <div class="flip-card-front">
            </div>
            <div class="flip-card-back">
            <div class="result" id="result9"></div>
            </div>
          </div>
        </div> 

        <div  id="flip-card-10" class="flip-card" onclick="toggleNav('flip-card-10')">
          <div class="flip-card-inner">
            <div class="flip-card-front">
            </div>
            <div class="flip-card-back">
            <div class="result" id="result10"></div>
            </div>
          </div>
        </div> 
        
      </div>
    </section>

    </main>
    <script>

        var start = 1869;
        var end = new Date().getFullYear();
        var options = "";
        for (var year = start; year <= end; year++) {
            options += "<option>" + year + "</option>";
        }
        document.getElementById("year").innerHTML = options;


function goFunction(){
var obj, dbParam, xmlhttp, myObj, x, txt = "";

var queryString = "?results='5'&sports_code='mlb'&sort_column='era'&season='1954'&game_type='R'&leader_hitting_repeater.col_in=era"
var url = "https://mlb-data.p.rapidapi.com/json/named.leader_pitching_repeater.bam"

fetch(url + queryString,{
	"method": "GET",
	"headers": {
		"x-rapidapi-key": "c1eed3bc67msh45ea31acdbf685dp1b3b6bjsn638c0b567e02",
		"x-rapidapi-host": "mlb-data.p.rapidapi.com"
	}
})
.then(response => response.json())
.then(data => {
  console.log('Success:', data);
  var myObj = (data.leader_pitching_repeater.leader_pitching_mux.queryResults.row);

  txt += "<table border='1'>"
  txt += "<th>" + "Name" + "</th>";
  txt += "<th>" + "E.R.A." + "</th>";


  for(i = 0; i < 6; i++){
  for (x in myObj) {
        

      txt += "<tr><td>" + myObj[x].name_display_first_last + "</td>";
      txt += "<td>" + myObj[x].era + "</td></tr>";
      console.log(i )
      document.getElementById("result"+ toString(i)).innerHTML = txt;
    }
    txt += "</table>";  
  }

  //document.getElementById("result1").innerHTML = JSON.stringify(data);
  document.getElementById("result2").innerHTML =
  JSON.stringify(data.leader_pitching_repeater.leader_pitching_mux.queryResults.row);
})
.catch(err => {
	console.error(err);
});
}


function getURL(){
  var x = "https://mlb-data.p.rapidapi.com/json/named.leader_pitching_repeater.bam?results='5'&sports_code='mlb'&sort_column='era'&season='2017'&game_type='R'&leader_hitting_repeater.col_in=era";
  return x;
}


function toggleNav(id) {
    var updateElement1 = document.getElementById(id);
    //toggle adds a class if it's not there or removes it if it is.
    updateElement1.classList.toggle("open");
}




    </script>
    <!--<script src="js/index.js" type="module"></script> -->
</body>

</html>